<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Página criação de conta do MyHealth. Um site para contorlar as suas vacinas" >
        <title>MyHealth - Criar Conta</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Averia+Libre&display=swap" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="img/favicon.ico">
        <link rel="stylesheet" href="./css/global.css">
        <link rel="stylesheet" href="./css/criarConta.css">
    </head>
    <body>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
            import { getAuth } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";
            import {createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
          
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyBBRZZFQlmx-XAu2lG_NqLymPA1rammWB0",
                authDomain: "myhealth-d1dcc.firebaseapp.com",
                projectId: "myhealth-d1dcc",
                storageBucket: "myhealth-d1dcc.appspot.com",
                messagingSenderId: "956659268017",
                appId: "1:956659268017:web:034ca0be6970e04c332590",
                measurementId: "G-YRSQ1PBKGB"
                };
          
            // Initialize Firebase
            var app = initializeApp(firebaseConfig);
            
            const criarContaBtn = document.getElementById("criarContaBtn");
            criarContaBtn.addEventListener("click", criarConta);

            function criarConta(){
                const senha = document.getElementById("senha").value;
                const senhaRep = document.getElementById("senhaRep").value;


                if(checarSenha(senha, senhaRep)){
                    const nome = document.getElementById("nome").value;
                    const genero = document.getElementById("generos").value;
                    const dataNascimento = document.getElementById("dataNasc").value;
                    const email = document.getElementById("email").value;
                    console.log(dataNascimento);
/*                 
                    const usuario = {
                        nome: nome,
                        genero: genero,
                        email: email,
                        senha: senha
                    };

                    createUserWithEmailAndPassword(getAuth(app), usuario.email, usuario.senha)
                    .then((userCredential) => {
                         
                        var user = userCredential.user;
                        localStorage.setItem("usuarioLogado", user);
                        window.location.href = "index.html";
                    })
                    .catch((error) => {
                        var errorCode = error.code;
                        var errorMessage = error.message;
                    });*/
                }
            }


            function checarSenha(senha, senhaRep){
                const erroSenha = document.getElementById("erroSenha");

                if(senha === senhaRep){
                    erroSenha.className = 'escondido';
                    return true
                }else{
                    erroSenha.className = 'erro';
                    return false;
                }
            }
          </script>

        <header>
            <a id="titulo" href="/"><img id="logo" src="./img/logo.png"></img>MyHealth</a>
        </header>
        <main>
            <form action="" class="formDados">
                <div class="formContainer">
                    <label class="formLabel" for="nome">Nome completo</label>
                    <input class="formInput" type="text" id="nome" name="nome">
                    <div class="formLabel">Sexo</div>
                    <div class="formInput" id="generos">
                        <input type="radio" name="sexo" id="masculino" value="masculino">
                        <label for="masculino">Masculino</label>
                        <input type="radio" name="sexo" id="feminino" value="feminino">
                        <label for="feminino">Feminino</label>
                    </div>
                    <label class="formLabel" for="dataNac">Data de nascimento</label>
                    <input class="formInput" type="date" id="dataNasc" name="dataNasc">
                    <label class="formLabel" for="email">E-mail</label>
                    <input class="formInput" type="email" name="email" id="email" >
                    <label class="formLabel" for="senha">Senha</label>
                    <input class="formInput" type="password" id="senha" name="senha">
                    <label class="formLabel senhaRep" for="senhaRep">Repetir senha</label>
                    <div class="formInput">
                        <input  type="password" name="senhaRep" id="senhaRep">
                        <p class="escondido" id="erroSenha">Senha não confere!</p>
                    </div>
                    
                </div>
                    <div id="criarContaBtn" class="botao save">Cadastrar</div>
            </form>
            
        </main>


    </body>
</html>