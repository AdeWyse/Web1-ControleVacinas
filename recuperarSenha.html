<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Página de recuperação de senha do MyHealth. Um site para contorlar as suas vacinas" >
        <title>MyHealth - Recuperar Senha</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Averia+Libre&display=swap" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="img/favicon.ico">
        <link rel="stylesheet" href="./css/global.css">
        <link rel="stylesheet" href="./css/recuperarSenha.css">
    </head>
    <body>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
            import { getAuth } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";
            import {createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
          
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyBBRZZFQlmx-XAu2lG_NqLymPA1rammWB0",
                authDomain: "myhealth-d1dcc.firebaseapp.com",
                projectId: "myhealth-d1dcc",
                storageBucket: "myhealth-d1dcc.appspot.com",
                messagingSenderId: "956659268017",
                appId: "1:956659268017:web:034ca0be6970e04c332590",
                measurementId: "G-YRSQ1PBKGB"
                };
          
            // Initialize Firebase
            var app = initializeApp(firebaseConfig);
            
            const criarContaBtn = document.getElementById("redefinirButton");
            criarContaBtn.addEventListener("click", criarConta);

            function recuperarSenha(){
                const senha = document.getElementById("senha").value;
                const senhaRep = document.getElementById("senhaRep").value;


                if(checarSenha(senha, senhaRep)){
                    const email = document.getElementById("email").value;

                    createUserWithEmailAndPassword(getAuth(app), usuario.email, usuario.senha)
                    .then((userCredential) => {
                        var user = userCredential.user;
                        localStorage.setItem("usuarioLogado", user);
                        window.location.href = "index.html";
                    })
                    .catch((error) => {
                        var errorCode = error.code;
                        var errorMessage = error.message;
                    });
                }
            }

          </script>
        <header>
            <a id="titulo" href="/home.html"><img id="logo" src="./img/logo.png"></img>MyHealth</a>
        </header>
        <main>
            <form action="" class="formLongo">
                <div class="formLongoDados">
                    <label class="formLongoLabel" for="email">E-mail</label>
                    <input class="formLongoInput" type="email" id="email" name="email">
                </div>
                <div id="redefinirButton" class="botao save">Redefinir Senha</div>
            </form>
        </main>
    </body>
</html>